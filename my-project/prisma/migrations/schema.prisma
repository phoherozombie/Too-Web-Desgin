datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Movie {
  id         Int      @id @default(autoincrement())
  title      String
  genre      String
  director   String
  cast       String
  duration   Int
  releaseDate DateTime
  language   String
  rating     String
  showtimes  Showtime[]
}

model Cinema {
  id             Int      @id @default(autoincrement())
  name           String
  location       String
  numberOfScreens Int
  screens        Screen[]
}

model Screen {
  id          Int      @id @default(autoincrement())
  cinemaId   Int
  screenNumber Int
  Cinema    Cinema  @relation(fields: [cinemaId], references: [id])
  seats       Seat[]
  showtimes   Showtime[]
}

model Seat {
  id        Int      @id @default(autoincrement())
  screenId  Int
  seatNumber Int
  rowNumber Int
  screen    Screen  @relation(fields: [screenId], references: [id])
  tickets   Ticket[]
}

model Showtime {
  id        Int      @id @default(autoincrement())
  movieId   Int
  screenId  Int
  startTime DateTime
  endTime   DateTime
  movie     Movie    @relation(fields: [movieId], references: [id])
  screen    Screen   @relation(fields: [screenId], references: [id])
  tickets   Ticket[]
}

model Customer {
  id        Int      @id @default(autoincrement())
  name String
  address   String
  tickets   Ticket[]
  transactions Transaction[]
}

model Ticket {
  id           Int      @id @default(autoincrement())
  customerId   Int
  showtimeId   Int
  seatId       Int
  price        Float
  purchaseDateTime DateTime
  customer     Customer @relation(fields: [customerId], references: [id])
  showtime     Showtime @relation(fields: [showtimeId], references: [id])
  seat         Seat     @relation(fields: [seatId], references: [id])
  transactions Transaction[]
}

model Transaction {
  id             Int      @id @default(autoincrement())
  customerId     Int
  ticketId       Int
  paymentMethod  String
  transactionDateTime DateTime
  amount         Float
  customer       Customer @relation(fields: [customerId], references: [id])
  ticket         Ticket   @relation(fields: [ticketId], references: [id])
}